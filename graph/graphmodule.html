<!DOCTYPE html>
<html>
	<head>
    <meta http-equiv="content-type" content = "text/html; charset= UTF-8"/>
	<script src="jquery-2.1.4.js"></script>
	<script src="plotly.min.js"></script>
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	<link rel="stylesheet" type="text/css" href="styles.css">
	<script>
	window.onload = function(){
		var iframe = document.createElement('iframe');
		iframe.id = 'iframe';
		iframe.style.display = 'none';
		document.body.appendChild(iframe);
		iframe.src = 'testgraphmodule.csv';
		setTimeout(function(){
			var text = document.getElementById('iframe').contentDocument.body.firstChild.innerHTML;
			alert(text);
		}, 1000);
	}
	</script>
	</head>
	<body>
	<div class="navbar"><span>Real-Time Telemetry Data</span></div>
	<div class="wrapper">
		<div id="chart"></div>
		<script>	
		
			function getData(){
				return Math.random();
			}
			var data = [{y:[getData()], type: 'line'}, {y: [getData()],type: 'line'}, {y: [getData()],type: 'line'}];
			Plotly.plot('chart', data);
			var cnt=0;
			setInterval(function(){
				Plotly.extendTraces('chart',{y:[[getData()]]},[0])
				Plotly.extendTraces('chart',{y:[[getData()]]},[1])
				Plotly.extendTraces('chart',{y:[[getData()]]},[2])
				cnt++;
				if(cnt>500){
					Plotly.relayout('chart', {
						xaxis: {
							range: [cnt-500, cnt]
						}
					});
				}
			},200);
		</script>
	</div>
	</body>
</html>